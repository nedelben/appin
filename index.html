<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>استبيان: تجربة التنقل والعنونة</title>
  <style>
    body{margin:0;min-height:100vh;background:#0b1220;color:#fff;display:flex;align-items:center;justify-content:center;font-family:Arial, sans-serif;padding:20px}
    .frame{width:100%;max-width:760px;background:#111a2c;padding:22px;border-radius:18px;box-shadow:0 10px 40px rgba(0,0,0,.5)}
    h1{text-align:center}
    .welcome,.thanks{display:flex;flex-direction:column;gap:14px;align-items:center;justify-content:center;text-align:center}
    .thanks{display:none}
    .btn{padding:10px 16px;border-radius:10px;font-weight:bold;cursor:pointer;border:none}
    .btn.primary{background:#06b6d4;color:#012}
    .btn.secondary{background:transparent;border:1px solid #555;color:#ccc}
    form{display:flex;flex-direction:column;gap:14px}
    .q{display:none;flex-direction:column;gap:10px}
    .q.active{display:flex}
    label{font-weight:bold}
    input,select,textarea{padding:10px;border-radius:8px;border:none;background:#1b2236;color:#fff;width:100%}
    textarea{min-height:80px}
    .nav{display:flex;justify-content:space-between;align-items:center}
  </style>
</head>
<body>
  <div class="frame">
    <h1>استبيان: تجربة التنقل والعنونة</h1>

    <!-- شاشة البداية -->
    <div id="welcome" class="welcome">
      <p>مرحبًا 👋 هذا الاستبيان قصير (3 دقائق) لفهم تحديات التنقل وإيجاد الأماكن داخل المدن الجزائرية.</p>
      <button id="startBtn" class="btn primary">ابدأ الاستبيان</button>
      <button id="authorsBtn" class="btn secondary">منظمو الاستبيان</button>
    </div>

    <!-- نموذج الأسئلة -->
    <form id="survey" hidden>
      <div class="q active" data-q="1">
        <label>1. ما اسم مدينتك الحالية؟</label>
        <input type="text" name="City" required />
      </div>
      <div class="q" data-q="2">
        <label>2. هل تجد صعوبة في الوصول إلى أماكن أو شوارع جديدة؟</label>
        <select name="Directions" required>
          <option value="">اختر</option>
          <option>غالباً</option>
          <option>أحياناً</option>
          <option>نادراً</option>
          <option>أبداً</option>
        </select>
      </div>
      <div class="q" data-q="3">
        <label>3. كم عمرك؟</label>
        <input type="number" name="Age" min="15" max="80" required />
      </div>
      <div class="q" data-q="4">
        <label>4. بريدك الإلكتروني</label>
        <input type="email" name="Email" required />
      </div>
      <div class="q" data-q="5">
        <label>5. اسمك الكامل</label>
        <input type="text" name="Full Name" required />
      </div>

      <div class="nav">
        <button type="button" id="prev" class="btn secondary">السابق</button>
        <button type="button" id="next" class="btn primary">التالي</button>
      </div>
    </form>

    <!-- شاشة النهاية -->
    <div id="thanks" class="thanks">
      <h2>🎉 شكراً لمشاركتك!</h2>
      <p>سنرسل لك لاحقاً تفاصيل حول منتجنا في حالة توفره.</p>
      <h3>منظمو الاستبيان</h3>
      <ul style="list-style:none;padding:0;margin:0">
        <li>benyak nadal – Université de Médéa</li>
        <li>Asmahan Belkacemi – University of Algiers 1</li>
        <li>Khaled Bouchenafa – University of Algiers 1</li>
        <li>Amar Kadri – University of Oran 2</li>
        <li>Ahlam Minasri – University of Oran 2</li>
      </ul>
    </div>
  </div>

  <script>
    const startBtn=document.getElementById('startBtn');
    const authorsBtn=document.getElementById('authorsBtn');
    const welcome=document.getElementById('welcome');
    const form=document.getElementById('survey');
    const qs=Array.from(document.querySelectorAll('.q'));
    const prev=document.getElementById('prev');
    const next=document.getElementById('next');
    const thanks=document.getElementById('thanks');

    let idx=0;

    startBtn.addEventListener('click',()=>{
      welcome.style.display='none';
      form.hidden=false;
      update();
    });
    authorsBtn.addEventListener('click',()=>{
      alert("منظمو الاستبيان:\n• benyak nadal – Université de Médéa\n• Asmahan Belkacemi – University of Algiers 1\n• Khaled Bouchenafa – University of Algiers 1\n• Amar Kadri – University of Oran 2\n• Ahlam Minasri – University of Oran 2");
    });

    prev.addEventListener('click',()=>{ if(idx>0){idx--;update();} });
    next.addEventListener('click',async()=>{
      const currentQ=qs[idx];
      const inputs=currentQ.querySelectorAll('input,select,textarea');
      for(const el of inputs){
        if(el.hasAttribute('required') && !el.checkValidity()){
          el.reportValidity(); return;
        }
      }
      if(idx<qs.length-1){ idx++; update(); }
      else { await submitResponses(); }
    });

    function update(){
      qs.forEach((q,i)=>q.classList.toggle('active',i===idx));
      prev.disabled=idx===0;
      next.textContent=(idx===qs.length-1)?'إرسال الإجابات':'التالي';
    }

    async function submitResponses(){
      const data={};
      qs.forEach(q=>{
        const input=q.querySelector('input,select,textarea');
        if(input) data[input.name]=input.value;
      });

      try{
        await fetch("AKfycbzN0J5jOa8_q4fCV5e5-TkEa95MmFdQVqPkC5F0j9XuX9XnTljDyWC4PV7p6JV-h8BS",{
          method:"POST",
          body:JSON.stringify(data),
          headers:{"Content-Type":"application/json"}
        });
      }catch(e){ console.error("خطأ:",e); }

      form.hidden=true;
      thanks.style.display='flex';
    }
  </script>
</body>
</html>

