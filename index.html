<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>استبيان</title>
  <style>
    body{margin:0;font-family:sans-serif;background:#f5f6fa;display:flex;align-items:center;justify-content:center;min-height:100vh}
    .card{background:#fff;padding:20px;border-radius:14px;box-shadow:0 4px 12px rgba(0,0,0,.1);max-width:420px;width:100%;text-align:center}
    .hidden{display:none}
    h2{margin:0 0 10px}
    button{margin-top:15px;padding:10px 16px;border:none;border-radius:8px;cursor:pointer;font-weight:bold}
    .primary{background:#06b6d4;color:#fff}
    .secondary{background:#ddd}
    input,select,textarea{width:100%;padding:8px;border:1px solid #ccc;border-radius:8px;margin-top:8px}
  </style>
</head>
<body>
  <!-- شاشة الترحيب -->
  <div class="card" id="welcome">
    <h2>مرحباً بك</h2>
    <p>شكراً لمشاركتك في هذا الاستبيان حول صعوبات التنقل وإيجاد الأماكن.</p>
    <button id="startBtn" class="primary">ابدأ</button>
  </div>

  <!-- الاستبيان (البطاقات) -->
  <form class="card hidden" id="survey">
    <div class="step">
      <label>1. ما اسم مدينتك الحالية؟</label>
      <input name="city" required>
    </div>
    <div class="step hidden">
      <label>2. ما وسيلة تنقلك الأساسية؟</label>
      <select name="transport" required>
        <option value="">اختر</option><option>سيارة</option><option>حافلة</option><option>دراجة</option><option>مشياً</option>
      </select>
    </div>
    <div class="step hidden">
      <label>3. كيف تحصل غالباً على الاتجاهات؟</label>
      <select name="directions" required>
        <option value="">اختر</option><option>Google Maps</option><option>سؤال الناس</option><option>خبرتي</option>
      </select>
    </div>
    <div class="step hidden">
      <label>4. هل تجد صعوبة في إيجاد أماكن جديدة؟</label>
      <select name="find_places" required>
        <option value="">اختر</option><option>دائماً</option><option>أحياناً</option><option>نادراً</option><option>أبداً</option>
      </select>
    </div>
    <div class="step hidden">
      <label>5. هل أسماء الشوارع واضحة؟</label>
      <select name="street_names" required>
        <option value="">اختر</option><option>نعم</option><option>أحياناً</option><option>نادراً</option><option>لا</option>
      </select>
    </div>
    <div class="step hidden">
      <label>6. ما أبرز معلم يصعب الوصول إليه؟</label>
      <input name="landmarks">
    </div>
    <div class="step hidden">
      <label>7. هل واجهت صعوبة داخل المباني (جامعة، مستشفى)؟</label>
      <select name="indoor" required>
        <option value="">اختر</option><option>نعم</option><option>أحياناً</option><option>لا</option>
      </select>
    </div>
    <div class="step hidden">
      <label>8. هل ترغب في تطبيق خرائط جزائري؟</label>
      <select name="tech_help" required>
        <option value="">اختر</option><option>نعم</option><option>ربما</option><option>لا</option>
      </select>
    </div>
    <div class="step hidden">
      <label>9. هل تفضل أن يعمل التطبيق دون إنترنت؟</label>
      <select name="offline" required>
        <option value="">اختر</option><option>نعم</option><option>لا</option>
      </select>
    </div>
    <div class="step hidden">
      <label>10. ما الميزة التي تقترحها؟</label>
      <textarea name="improvement"></textarea>
    </div>
    <div class="step hidden">
      <label>11. عمرك</label>
      <input type="number" name="age" required>
    </div>
    <div class="step hidden">
      <label>12. جنسك</label>
      <select name="gender" required>
        <option value="">اختر</option><option>ذكر</option><option>أنثى</option>
      </select>
    </div>
    <div class="step hidden">
      <label>13. بريدك الإلكتروني</label>
      <input type="email" name="email" required>
    </div>
    <div class="step hidden">
      <label>14. اسمك الكامل</label>
      <input name="full_name" required>
    </div>

    <div>
      <button type="button" id="prevBtn" class="secondary">السابق</button>
      <button type="button" id="nextBtn" class="primary">التالي</button>
    </div>
  </form>

  <!-- شاشة الشكر -->
  <div class="card hidden" id="thanks">
    <h2>شكراً لمشاركتك!</h2>
    <p>سوف نرسل لك لاحقاً تفاصيل حول منتجنا في حالة توفره.</p>
    <ul style="text-align:right">
      <li>benyak nadal – Université de Médéa</li>
      <li>Asmahan Belkacemi – University of Algiers 1</li>
      <li>Khaled Bouchenafa – University of Algiers 1</li>
      <li>Amar Kadri – University of Oran 2</li>
      <li>Ahlam Minasri – University of Oran 2</li>
    </ul>
  </div>

<script>
  const start=document.getElementById('startBtn');
  const welcome=document.getElementById('welcome');
  const form=document.getElementById('survey');
  const steps=[...document.querySelectorAll('.step')];
  const next=document.getElementById('nextBtn');
  const prev=document.getElementById('prevBtn');
  const thanks=document.getElementById('thanks');
  let idx=0;

  start.onclick=()=>{welcome.classList.add('hidden');form.classList.remove('hidden');update()};
  prev.onclick=()=>{if(idx>0){steps[idx].classList.add('hidden');idx--;update()}};
  next.onclick=async()=>{
    const inputs=steps[idx].querySelectorAll('input,select,textarea');
    for(const el of inputs){if(el.required&&!el.value){el.reportValidity();return;}}
    if(idx<steps.length-1){steps[idx].classList.add('hidden');idx++;update();}
    else{await submit();}
  };

  function update(){
    steps[idx].classList.remove('hidden');
    prev.style.display=idx===0?"none":"inline-block";
    next.textContent=idx===steps.length-1?"إرسال الإجابات":"التالي";
  }

  async function submit(){
    const data=Object.fromEntries(new FormData(form).entries());
    const url="https://script.google.com/macros/s/AKfycbz-BMZK7xwJ6FHzSneQy8uxDlangfo4ufCpYJLs7l2g_etXlBoNtENb0JBmypswpPGDWw/exec";
    await fetch(url,{method:"POST",body:JSON.stringify(data),headers:{"Content-Type":"application/json"}});
    form.classList.add('hidden');
    thanks.classList.remove('hidden');
  }
</script>
</body>
</html>
